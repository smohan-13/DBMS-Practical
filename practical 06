set serveroutput on;
declare
  id int;
  pname varchar2(20);
  price float;
  qty int;
begin
  dbms_output.put_line('--- Implicit Cursor ---');
  id := &id;
  begin
    select pid, productname, price, qty into id, pname, price, qty from product where pid = id;
    if sql%found then
      dbms_output.put_line(id || ' ' || pname || ' ' || price || ' ' || qty);
    else
      dbms_output.put_line('No product found with pid ' || id);
    end if;
  exception
    when no_data_found then
      dbms_output.put_line('No product found with pid ' || id);
  end;
end;
/


declare
  pid int;
  pname varchar2(50);
  pr float;
  qty int;
  cursor c1(p float) is 
    select * from product where price >= p;
begin
  dbms_output.put_line('--- Explicit Cursor ---');
  open c1(&p);
  loop
    fetch c1 into pid, pname, pr, qty;
    exit when c1%notfound;
    dbms_output.put_line(pid || ' ' || pname || ' ' || pr || ' ' || qty);
  end loop;
  close c1;
end;
/


declare
  pid int;
  pname varchar2(50);
  pr float;
  qty int;
  cursor c1(p float) is 
    select * from product where price > p for update;
begin
  dbms_output.put_line('--- Update Cursor (price reduced by 2000) ---');
  open c1(&p);
  loop
    fetch c1 into pid, pname, pr, qty;
    exit when c1%notfound;
    update product set price = price - 2000 where current of c1;
    dbms_output.put_line(pid || ' ' || pname || ' ' || pr || ' ' || qty);
  end loop;
  close c1;
end;
/


declare
  pid int;
  pname varchar2(50);
  pr float;
  qty int;
  cursor c1(p float) is
    select * from product where price > p for update;
begin
  dbms_output.put_line('--- Delete Cursor ---');
  open c1(&p);
  loop
    fetch c1 into pid, pname, pr, qty;
    exit when c1%notfound;
    delete from product where current of c1;
    dbms_output.put_line(pid || ' ' || pname || ' ' || pr || ' ' || qty);
  end loop;
  close c1;
end;
/


declare
begin
  dbms_output.put_line('--- Cursor For Loop ---');
  for rec in (select * from product) loop
    dbms_output.put_line(rec.pid || ' ' || rec.productname || ' ' || rec.price || ' ' || rec.qty);
  end loop;
end;
/

SQL> create table product (
  2    pid number primary key,
  3    productname varchar2(20),
  4    price float,
  5    qty number
  6  );

Table created.

SQL>
SQL> insert into product values (101, 'Mobile', 1200, 1);

1 row created.

SQL> insert into product values (102, 'Laptop', 28000, 2);

1 row created.

SQL> insert into product values (103, 'Pc', 20000, 3);

1 row created.

SQL> commit;

Commit complete.

SQL> @C:\Users\gaval\Desktop\dbms_practical\implicit_explicit
Enter value for id: 101
old   8:   id := &id;
new   8:   id := 101;
--- Implicit Cursor ---
101 Mobile 1200 1

PL/SQL procedure successfully completed.

Enter value for p: 1200
old  10:   open c1(&p);
new  10:   open c1(1200);
--- Explicit Cursor ---
101 Mobile 1200 1
102 Laptop 28000 2
103 Pc 20000 3

PL/SQL procedure successfully completed.
